classes:
- system.nginx.server.single
- system.nginx.server.proxy.model_manager_web
- system.salt.minion.cert.proxy
- cluster.model_manager
parameters:
  _param:
    nginx_proxy_ssl:
      enabled: true
      authority: ${_param:salt_minion_ca_authority}
      engine: salt
      mode: secure
    salt_minion_ca_host: cfg01.${_param:cluster_domain}
  nginx:
    server:
      enabled: true
      site:
        nginx_proxy_openstack_api_keystone:
          enabled: true
          type: nginx_proxy
          name: openstack_api_keystone
          check: false
          proxy:
            host: ${_param:keystone_service_host}
            port: 5000
            protocol: http
          host:
            name: ${_param:nginx_proxy_openstack_api_host}
            port: 5000
          ssl: ${_param:nginx_proxy_ssl}
        nginx_proxy_openstack_api_keystone_private:
          enabled: true
          type: nginx_proxy
          name: openstack_api_keystone_private
          check: false
          proxy:
            host: ${_param:keystone_service_host}
            port: 35357
            protocol: http
          host:
            name: ${_param:nginx_proxy_openstack_api_host}
            port: 35357
          ssl: ${_param:nginx_proxy_ssl}

